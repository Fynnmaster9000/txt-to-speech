<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Text to Speech with Voice Switch</title>
<style>
  body { font-family: Arial, sans-serif; margin: 2em; }
  label.switch {
    position: relative; display: inline-block; width: 60px; height: 34px;
  }
  label.switch input {opacity: 0; width: 0; height: 0;}
  .slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background-color: #ccc; transition: .4s; border-radius: 34px;
  }
  .slider:before {
    position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px;
    background-color: white; transition: .4s; border-radius: 50%;
  }
  input:checked + .slider {background-color: #2196F3;}
  input:checked + .slider:before {transform: translateX(26px);}
  #playButton { margin-top: 1em; padding: 0.5em 1em; font-size: 1em; }
</style>
</head>
<body>

<h1>Text to Speech (Male/Female Switch)</h1>

<textarea id="textInput" rows="5" cols="40" placeholder="Enter text here..."></textarea>
<br/><br/>

<label class="switch">
  <input type="checkbox" id="voiceSwitch" />
  <span class="slider"></span>
</label>
<span id="voiceLabel">Female Voice</span>

<br/><br/>
<button id="playButton">Play Speech</button>

<script>
  let voices = [];
  let maleVoice = null;
  let femaleVoice = null;

  function loadVoices() {
    voices = speechSynthesis.getVoices();

    // Find a female voice (try to match gender by name or voice properties)
    femaleVoice = voices.find(voice => /female|woman|girl/i.test(voice.name)) || voices[0];
    // Find a male voice similarly
    maleVoice = voices.find(voice => /male|man|boy/i.test(voice.name)) || voices[0];

    // If we couldn't find distinct male/female, fallback to first voice
    if (!femaleVoice) femaleVoice = voices[0];
    if (!maleVoice) maleVoice = voices[0];
  }

  // Voices might not be loaded immediately
  if (speechSynthesis.onvoiceschanged !== undefined) {
    speechSynthesis.onvoiceschanged = () => {
      loadVoices();
    };
  }

  // Initial load attempt
  loadVoices();

  const textInput = document.getElementById('textInput');
  const playButton = document.getElementById('playButton');
  const voiceSwitch = document.getElementById('voiceSwitch');
  const voiceLabel = document.getElementById('voiceLabel');

  voiceSwitch.addEventListener('change', () => {
    voiceLabel.textContent = voiceSwitch.checked ? 'Male Voice' : 'Female Voice';
  });

  playButton.addEventListener('click', () => {
    let text = textInput.value.trim();
    if (!text) {
      alert('Please enter some text.');
      return;
    }

    if (!speechSynthesis) {
      alert('Sorry, your browser does not support speech synthesis.');
      return;
    }

    let utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 1; // normal rate

    // Select voice based on toggle
    if (voiceSwitch.checked) {
      utterance.voice = maleVoice;
    } else {
      utterance.voice = femaleVoice;
    }

    speechSynthesis.cancel(); // stop any ongoing speech
    speechSynthesis.speak(utterance);
  });
</script>

</body>
</html>
